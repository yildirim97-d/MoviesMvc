<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Movies Report | jQuery AJAX</title>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-3.5.1.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <link href="Content/Site.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            GetMoviesReport();
        });

        function GetMoviesReport() {

            //$.ajax({
            //    cache: false,
            //    url: "/MoviesReportAjax/Json",
            //    type: "get",
            //    contentType: "application/json; charset=utf-8",
            //    dataType: "json",
            //    success: function (response, response_textstatus, response_jqxhr) {
            //        console.log("TextStatus: " + response_textstatus + " jqXHR: " + response_jqxhr.status);
            //        var table = '<table class="table table-responsive-lg">';
            //        table += "<tr>";
            //        table += "<th>Movie Name</th>";
            //        table += "<th>Movie Production Year</th>";
            //        table += "<th>Movie Box Office Return</th>";
            //        table += "<th>Director Name</th>";
            //        table += "<th>Is Director Retired?</th>";
            //        table += "<th>Review Content</th>";
            //        table += "<th>Review Rating</th>";
            //        table += "<th>Reviewer</th>";
            //        table += "<th>Review Date</th>";
            //        table += "</tr>";
            //        for (var i = 0; i < response.length; i++) {
            //            table += "<tr>";
            //            table += "<td>" + response[i].MovieName + "</td>";
            //            table += "<td>" + response[i].MovieProductionYear + "</td>";
            //            table += "<td>" + response[i].MovieBoxOfficeReturn + "</td>";
            //            table += "<td>" + response[i].DirectorFullName + "</td>";
            //            table += "<td>" + response[i].DirectorRetired + "</td>";
            //            table += "<td>" + response[i].ReviewContent + "</td>";
            //            table += "<td>" + response[i].ReviewRating + "</td>";
            //            table += "<td>" + response[i].ReviewReviewer + "</td>";
            //            table += "<td>" + response[i].ReviewDate + "</td>";
            //            table += "</tr>";
            //        }
            //        table += "</table>";
            //        $("#divMoviesReport").html(table);
            //    },
            //    error: function (response_jqxhr, response_textstatus) {
            //        console.log("TextStatus: " + response_textstatus + " jqXHR: " + response_jqxhr.status);
            //    }
            //});
            $.getJSON("/MoviesReportAjax/Json", function (list) {
                var table = '<table class="table table-responsive-lg">';
                table += "<tr>";
                table += "<th>Movie Name</th>";
                table += "<th>Movie Production Year</th>";
                table += "<th>Movie Box Office Return</th>";
                table += "<th>Director Name</th>";
                table += "<th>Is Director Retired?</th>";
                table += "<th>Review Content</th>";
                table += "<th>Review Rating</th>";
                table += "<th>Reviewer</th>";
                table += "<th>Review Date</th>";
                table += "</tr>";
                $.each(list, function (i, item) {
                    table += "<tr>";
                    table += "<td>" + item.MovieName + "</td>";
                    table += "<td>" + item.MovieProductionYear + "</td>";
                    table += "<td>" + item.MovieBoxOfficeReturn + "</td>";
                    table += "<td>" + item.DirectorFullName + "</td>";
                    table += "<td>" + item.DirectorRetired + "</td>";
                    table += "<td>" + item.ReviewContent + "</td>";
                    table += "<td>" + item.ReviewRating + "</td>";
                    table += "<td>" + item.ReviewReviewer + "</td>";
                    table += "<td>" + item.ReviewDate + "</td>";
                    table += "</tr>";
                });
                table += "</table>";
                $("#divMoviesReport").html(table);
            });

        }
    </script>
</head>
<body>
    <div class="container-fluid">
        <h2>Movies Report | jQuery AJAX</h2>
        <div class="row paddingtop">
            <div class="col-12">
                <div id="divMoviesReport">

                </div>
            </div>
        </div>
    </div>
</body>
</html>